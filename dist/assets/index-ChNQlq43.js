(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function p(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=p(e);fetch(e.href,o)}})();const E={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"341cba93fc5c4e4da7f7fb08a85608c7",VITE_MAPBOX_TOKEN:"pk.eyJ1IjoiZGFud2ViIiwiYSI6ImNtMHZhNjZkNDBqNW0ya3Nnd3RpcTR2eWgifQ.y09KufQuHzNFUxSWJrmUKg"};document.addEventListener("DOMContentLoaded",function(){const{VITE_API_KEY:u,VITE_MAPBOX_TOKEN:i}=E,p=document.getElementById("search-button"),r=document.getElementById("search-bar"),e=document.getElementById("ip"),o=document.getElementById("local"),s=document.getElementById("time"),f=document.getElementById("isp"),g=document.getElementById("map"),y=document.querySelector(".description-bar"),h=document.querySelectorAll(".container-item");let c;if(!i)throw new Error("An API access token is required to use Mapbox GL.");mapboxgl.accessToken=i;const a=new mapboxgl.Map({style:"mapbox://styles/mapbox/light-v11",center:[-74.0066,40.7135],zoom:20.5,pitch:45,bearing:-17.6,container:"map",antialias:!0});a.on("style.load",()=>{const d=a.getStyle().layers.find(n=>n.type==="symbol"&&n.layout["text-field"]).id;a.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},d)});const b=()=>{h.forEach(t=>t.classList.toggle("active"))};y.addEventListener("click",b);const I=t=>{e.innerHTML=`<p>IP Address</p><h1>${t.ip}</h1>`,o.innerHTML=`<p>Location</p><h1>${t.country_name?t.country_name+" ":""}${t.zipcode||""}</h1>`,s.innerHTML=`<p>Timezone</p><h1>UTC ${t.time_zone.offset}</h1>`,f.innerHTML=`<p>ISP</p><h1>${t.isp}</h1>`},m=async t=>{try{const n=await(await fetch(`https://api.ipgeolocation.io/ipgeo?apiKey=${u}&ip=${t}`)).json();I(n),c&&c.remove(),a.flyTo({center:[n.longitude,n.latitude],zoom:13}),c=new mapboxgl.Marker().setLngLat([n.longitude,n.latitude]).setPopup(new mapboxgl.Popup().setHTML(`<b>${n.city}, ${n.country_name} ${n.zipcode}</b>`)).addTo(a)}catch(d){console.error(d)}};m(""),p.addEventListener("click",()=>{const t=r.value.trim();t?m(t):r.placeholder="Please enter an IP address"});const l=L.map(g).setView([0,0],13);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(l),l.locate({setView:!0,maxZoom:13}),l.on("locationfound",t=>{c=L.marker([t.latitude,t.longitude]).addTo(l).bindPopup("You are here!").openPopup()}),map.addControl(new mapboxgl.NavigationControl)});
